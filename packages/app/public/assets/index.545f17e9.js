import{n as Bt,B as nt,m as st,S as Zt,M as Dt,z as Xt,A as Qt}from"./ant-design-vue.564ad3b8.js";import{h as U,d as P,L as at,V as g,W as k,X as m,u as c,a2 as E,$ as X,S as it,Y as ht,r as S,a0 as b,c as t,a3 as o,a1 as A,H as to,w as V,o as lt,n as Q,F as T,_ as O,J as h,a5 as pt,a6 as ct,a7 as oo,a4 as $t,e as tt,a8 as mt,l as Ft,Z as eo,s as rt,a9 as ro,j as no,U as ao}from"./@vue.c35ed996.js";import{c as io,a as lo,u as mo}from"./vue-router.1f031ff8.js";import{d as so,c as po}from"./lodash.72a5612d.js";import{a0 as co,a1 as go}from"./@ant-design.3b2e5a41.js";import{d as At}from"./dayjs.8309ba0c.js";import{V as uo}from"./vue3-colorpicker.c049f79d.js";import"./@babel.15d7ba59.js";import"./resize-observer-polyfill.ec24e57b.js";import"./@ctrl.a877c51b.js";import"./dom-align.73bcd739.js";import"./lodash-es.2ec95d04.js";import"./async-validator.51223f84.js";import"./scroll-into-view-if-needed.aecd2200.js";import"./compute-scroll-into-view.367eab13.js";import"./vue-types.b3d8d5bc.js";import"./tinycolor2.bbf7e834.js";import"./@vueuse.220a90ea.js";import"./@aesoper.438b8cd9.js";import"./vue3-angle.95911554.js";import"./gradient-parser.91181912.js";import"./@popperjs.2eb658a9.js";const bo=function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const e of a)if(e.type==="childList")for(const x of e.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&r(x)}).observe(document,{childList:!0,subtree:!0});function l(a){const e={};return a.integrity&&(e.integrity=a.integrity),a.referrerpolicy&&(e.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?e.credentials="include":a.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(a){if(a.ep)return;a.ep=!0;const e=l(a);fetch(a.href,e)}};bo();const{StringUtils:fo}=require("@ocsjs/common"),{clipboard:ho}=require("electron");function G(n,d,l,r){(r==null?void 0:r.type)==="error"&&console.error(n,d),Bt[(r==null?void 0:r.type)||"info"]({key:l,message:n,description:U("span",{title:String(d)},fo.max(String(d),100)),duration:(r==null?void 0:r.duration)||((r==null?void 0:r.type)==="error"?60:10),btn:(r==null?void 0:r.btn)||U("div",[r!=null&&r.copy?vo(n,d,l,r):"",r!=null&&r.close?xo(l):""])})}function xo(n){return U(nt,{type:"primary",size:"small",onClick:()=>{Bt.close(n)}},"\u5173\u95ED")}function vo(n,d,l,r){return U(nt,{type:"primary",size:"small",onClick:()=>{ho.writeText(n+`
`+String(d)),G(n,d,l,{...r,btn:U(nt,{type:"primary",size:"small",disabled:!0},"\u590D\u5236\u6210\u529F\u221A")})}},"\u590D\u5236\u4FE1\u606F")}const{randomUUID:wo}=require("crypto"),{ipcRenderer:gt}=require("electron");function Z(n){function d(r,...a){const e=gt.sendSync(r,...a);return e!=null&&e.error&&G("remote \u6A21\u5757\u9519\u8BEF",e.error,"remote",{copy:!0,type:"error"}),e}function l(r,a){return new Promise(e=>{gt.once(a[0],(x,...i)=>{i[0].error?G("remote \u6A21\u5757\u9519\u8BEF",i[0].error,"remote",{copy:!0,type:"error"}):e(i[0].data),console.log(a[1],a[2],i[0].data)}),gt.send(r,a)})}return{get(r){return d(n+"-get",[r])},set(r,a){return d(n+"-set",[r,a])},call(r,...a){const e=[n,"call"].join("-"),x=wo().replace(/-/g,"");return l(e,[x,r,...a])}}}const $={win:Z("win"),webContents:Z("webContents"),app:Z("app"),dialog:Z("dialog"),methods:Z("methods"),logger:Z("logger")};var N=(n,d)=>{const l=n.__vccOpts||n;for(const[r,a]of d)l[r]=a;return l};const yo={class:"text-start"},ko={class:"rounded pt-1"},_o={key:0,class:"mb-2 title fw-bold border-bottom"},zo=P({__name:"Card",props:{title:{default:""},badge:{default:"gray"}},setup(n){const d=n,{title:l}=at(d);return(r,a)=>(g(),k("div",yo,[m("div",ko,[c(l)?(g(),k("p",_o,E(c(l)),1)):X("",!0),it(r.$slots,"default",{},void 0,!0)])]))}});var ut=N(zo,[["__scopeId","data-v-6939ef65"]]);const Fo={class:"row flex-nowrap mb-1"},Eo={class:"col-3 desc-label"},Co={class:"col-9 d-inline-flex align-items-center"},Bo=P({__name:"Description",props:{label:null,desc:{default:""},textClass:{default:""}},setup(n){const d=n,{label:l,desc:r,textClass:a}=at(d);return(e,x)=>(g(),k("span",Fo,[m("span",Eo,E(c(l))+" : ",1),m("span",Co,[c(r)?(g(),k("span",{key:0,class:ht(["desc",c(a)])},E(String(c(r))),3)):X("",!0),it(e.$slots,"default",{},void 0,!0)])]))}});var J=N(Bo,[["__scopeId","data-v-333b9222"]]);const bt=P({__name:"Path",props:{name:null,label:null,setting:{type:Boolean,default:!1}},setup(n){const d=n,l=require("path"),{label:r,name:a,setting:e}=at(d),{shell:x}=require("electron"),i=S(p[a.value]?l.resolve(p[a.value]):"\u65E0");async function u(y){if(e.value){const s=await $.dialog.call("showOpenDialogSync",{properties:["openDirectory"],defaultPath:i.value});s&&(i.value=s[0],p[y]=s[0])}}return(y,s)=>{const f=b("Icon");return g(),k("div",null,[t(J,{label:c(r),desc:i.value,"text-class":"pointer",onClick:s[1]||(s[1]=C=>c(x).showItemInFolder(i.value))},{default:o(()=>[c(e)?(g(),A(f,{key:0,class:"ms-3",type:"icon-setting",onClick:s[0]||(s[0]=to(C=>u(c(a)),["stop"]))})):X("",!0)]),_:1},8,["label","desc"])])}}}),Do=require("fs"),$o=require("path"),Ao=require("events"),jo=require("crypto"),H={fs:Do,path:$o,events:Ao,crypto:jo};const xt=n=>(pt("data-v-617151c5"),n=n(),ct(),n),So={class:"w-100"},Io={class:"setting text-center p-2 col-12 col-md-10 col-lg-8"},Mo=h(" \u81EA\u5B9A\u4E49\u6D4F\u89C8\u5668 "),Uo=xt(()=>m("b",null,"\u6D4F\u89C8\u5668\u8DEF\u5F84\u83B7\u53D6\u65B9\u5F0F",-1)),Lo=xt(()=>m("div",null,[m("b",null,"\u8C37\u6B4C\u6D4F\u89C8\u5668"),h(" : \u6253\u5F00\u8C37\u6B4C\u6D4F\u89C8\u5668 "),m("br"),h(" \u8BBF\u95EE "),m("b",null,"chrome://version"),h(" \u627E\u5230 "),m("b",null,"\u53EF\u6267\u884C\u6587\u4EF6\u8DEF\u5F84"),h(" \u590D\u5236\u7C98\u8D34\u5373\u53EF ")],-1)),To=xt(()=>m("div",null,[m("b",null,"Edge\u6D4F\u89C8\u5668"),h(" : \u6253\u5F00Edge\u6D4F\u89C8\u5668"),m("br"),h(" \u8BBF\u95EE "),m("b",null,"edge://version"),h(" \u627E\u5230 "),m("b",null,"\u53EF\u6267\u884C\u6587\u4EF6\u8DEF\u5F84"),h(" \u590D\u5236\u7C98\u8D34\u5373\u53EF ")],-1)),Po={class:"mt-4"},Oo=h(" \u91CD\u7F6E\u8BBE\u7F6E "),Ro=P({__name:"index",setup(n){const d=S(p.setting.theme.name);V(d,()=>{const x=W.themes.find(i=>i.name===d.value);x&&(p.setting.theme=x)});const l=S("diy"),r=p.setting.launchOptions;V(l,()=>{r.executablePath=l.value==="diy"?"":l.value});function a(){r.executablePath&&!H.fs.existsSync(r.executablePath)&&st.error("\u81EA\u5B9A\u4E49\u7684\u6D4F\u89C8\u5668\u8DEF\u5F84\u4E0D\u5B58\u5728, \u8BF7\u70B9\u51FB\u53F3\u4FA7\u6309\u94AE\u67E5\u770B\u6559\u7A0B\u3002")}lt(()=>{Q(()=>{var x;console.log("\u53EF\u7528\u6D4F\u89C8\u5668",p.validBrowsers),p.validBrowsers.length!==0&&r.executablePath===""&&p.validBrowsers[0].path&&(r.executablePath=p.validBrowsers[0].path),l.value=((x=p.validBrowsers.find(i=>i.path===r.executablePath))==null?void 0:x.path)||"diy"})});function e(){p.version=void 0,$.app.call("relaunch"),$.app.call("exit",0)}return(x,i)=>{const u=b("a-switch"),y=b("a-select-option"),s=b("a-select"),f=b("a-input-number"),C=b("Icon"),D=b("a-popover"),j=b("a-input"),F=b("a-button"),I=b("a-popconfirm");return g(),k("div",So,[m("div",Io,[t(ut,{title:"\u57FA\u672C\u8BBE\u7F6E"},{default:o(()=>[t(J,{label:"\u5F00\u673A\u81EA\u542F"},{default:o(()=>[t(u,{checked:c(p)["auto-launch"],"onUpdate:checked":i[0]||(i[0]=B=>c(p)["auto-launch"]=B),size:"small"},null,8,["checked"])]),_:1}),t(J,{label:"\u7A97\u53E3\u7F6E\u9876"},{default:o(()=>[t(u,{checked:c(p).setting.window.alwaysOnTop,"onUpdate:checked":i[1]||(i[1]=B=>c(p).setting.window.alwaysOnTop=B),size:"small"},null,8,["checked"])]),_:1}),t(J,{label:"\u4E3B\u9898"},{default:o(()=>[t(s,{value:d.value,"onUpdate:value":i[2]||(i[2]=B=>d.value=B),size:"small"},{default:o(()=>[(g(!0),k(T,null,O(c(W).themes,(B,z)=>(g(),A(y,{key:z,value:B.name},{default:o(()=>[h(E(B.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),t(J,{label:"\u7A97\u53E3\u5927\u5C0F"},{default:o(()=>[t(f,{value:c(p).setting.window.zoom,"onUpdate:value":i[3]||(i[3]=B=>c(p).setting.window.zoom=B),size:"small",step:.1,min:0,max:10},null,8,["value","step"])]),_:1})]),_:1}),t(ut,{title:"\u9ED8\u8BA4\u8BBE\u7F6E"},{default:o(()=>[t(J,{label:"\u6307\u5B9A\u6D4F\u89C8\u5668"},{default:o(()=>[t(s,{value:l.value,"onUpdate:value":i[4]||(i[4]=B=>l.value=B),title:c(r).executablePath,size:"small",class:"w-100"},{default:o(()=>[(g(!0),k(T,null,O(c(p).validBrowsers,(B,z)=>(g(),A(y,{key:z,value:B.path},{default:o(()=>[h(E(B.name),1)]),_:2},1032,["value"]))),128)),t(y,{key:"diy",value:"diy"},{default:o(()=>[Mo]),_:1})]),_:1},8,["value","title"])]),_:1}),l.value==="diy"?(g(),A(J,{key:0,label:"\u81EA\u5B9A\u4E49\u6D4F\u89C8\u5668\u8DEF\u5F84"},{default:o(()=>[t(j,{value:c(r).executablePath,"onUpdate:value":i[5]||(i[5]=B=>c(r).executablePath=B),size:"small",class:"w-100",onBlur:a},{suffix:o(()=>[t(D,null,{title:o(()=>[Uo]),content:o(()=>[Lo,To]),default:o(()=>[t(C,{type:"icon-question-circle"})]),_:1})]),_:1},8,["value"])]),_:1})):X("",!0)]),_:1}),t(ut,{title:"\u8DEF\u5F84\u8BBE\u7F6E"},{default:o(()=>[t(bt,{label:"\u6D4F\u89C8\u5668\u7F13\u5B58",name:"userDataDirsFolder",setting:!0}),t(bt,{label:"\u6D4F\u89C8\u5668\u62D3\u5C55",name:"extensionsPath",setting:!0}),t(bt,{label:"\u914D\u7F6E\u6587\u4EF6",name:"config-path"})]),_:1}),m("div",Po,[t(I,{title:"\u786E\u8BA4\u91CD\u7F6E\u60A8\u7684\u8BBE\u7F6E\uFF0C\u5E76\u91CD\u65B0\u542F\u52A8\u8F6F\u4EF6\u5417\uFF1F","ok-text":"\u786E\u8BA4","cancel-text":"\u53D6\u6D88",onConfirm:e},{default:o(()=>[t(F,{shape:"round",size:"small",danger:""},{default:o(()=>[Oo]),_:1})]),_:1})])])])}}});var qo=N(Ro,[["__scopeId","data-v-617151c5"]]);const No=P({__name:"Icon",props:{type:null,title:{default:""},active:{type:Boolean}},setup(n){const d=n,l=U("span"),r=oo(),{type:a}=at(d);return(e,x)=>{const i=b("IconFont");return g(),A($t(c(r).default?c(Zt):c(l)),null,{default:o(()=>[t(i,{class:ht(["ocs-icon",{active:n.active}]),type:c(a),title:n.title},null,8,["type","title","class"]),m("span",null,[it(e.$slots,"default",{},void 0,!0)])]),_:3})}}});var q=N(No,[["__scopeId","data-v-0a46478e"]]);const Vo={key:1},Yo=h("\u5220\u9664"),Ko=h("\u91CD\u547D\u540D"),Ho=P({__name:"Entity",props:{uid:null,name:null,icon:null,renaming:{type:Boolean},onClick:null,onRemove:null,onRename:null},setup(n){const d=n,l=S(),r=S(d.renaming),a=S(d.name);V(r,()=>{r.value&&Q(e)}),lt(()=>{Q(e)});function e(){var x,i;(x=l.value)==null||x.focus(),(i=l.value)==null||i.select()}return(x,i)=>{const u=b("a-input"),y=b("a-menu-item"),s=b("a-menu"),f=b("a-dropdown");return g(),A(f,{trigger:["contextmenu"]},{overlay:o(()=>[t(s,{class:"entity-drop-menu"},{default:o(()=>[t(y,{key:"remove",onClick:i[3]||(i[3]=C=>{var D;return(D=n.onRemove)==null?void 0:D.call(n,n.uid)})},{default:o(()=>[t(q,{type:"icon-delete"},{default:o(()=>[Yo]),_:1})]),_:1}),t(y,{key:"rename",onClick:i[4]||(i[4]=C=>r.value=!0)},{default:o(()=>[t(q,{type:"icon-edit-square"},{default:o(()=>[Ko]),_:1})]),_:1}),it(x.$slots,"menus",{},void 0,!0)]),_:3})]),default:o(()=>[m("div",{onClick:i[2]||(i[2]=C=>{var D;return(D=n.onClick)==null?void 0:D.call(n,n.uid)})},[m("div",null,[t(q,{type:n.icon,class:"fs-1"},null,8,["type"])]),r.value?(g(),A(u,{key:0,ref_key:"input",ref:l,size:"small",value:a.value,"onUpdate:value":i[0]||(i[0]=C=>a.value=C),onBlur:i[1]||(i[1]=C=>{var D;return r.value=!1,(D=n.onRename)==null?void 0:D.call(n,n.uid,a.value)})},null,8,["value"])):(g(),k("span",Vo,E(n.name),1))])]),_:3})}}});var Et=N(Ho,[["__scopeId","data-v-1a0d55e4"]]);const Go=h(" \u6DFB\u52A0\u65B0\u6807\u7B7E "),Jo={class:"d-flex mb-3"},Wo=m("span",{class:"col-2"},"\u6807\u7B7E\u540D: ",-1),Zo={class:"d-flex"},Xo=m("span",{class:"col-2"},"\u6807\u7B7E\u989C\u8272: ",-1),Qo=P({__name:"Tags",props:{tags:null},emits:["update:tags","remove","create"],setup(n,{emit:d}){const l=n,r=S(),a=tt({modalVisible:!1,inputValue:"",color:""}),e=u=>{const y=l.tags.filter(s=>s.name!==u.name);d("update:tags",y),d("remove",u)},x=()=>{a.modalVisible=!0,Q(()=>{r.value.focus()})},i=()=>{const u=a.inputValue;let y=l.tags;if(u&&y.map(s=>s.name).indexOf(u)===-1){const s={name:u,color:a.color};y=[...y,s],d("create",s)}Object.assign(a,{modalVisible:!1,inputValue:"",color:""}),d("update:tags",y)};return(u,y)=>{const s=b("a-tag"),f=b("a-tooltip"),C=b("a-input"),D=b("ColorPicker"),j=b("a-modal");return g(),k(T,null,[(g(!0),k(T,null,O(n.tags,(F,I)=>(g(),k(T,{key:F},[F.name.length>20?(g(),A(f,{key:0,title:F},{default:o(()=>[t(s,{closable:!0,color:F.color,onClose:B=>e(F)},{default:o(()=>[h(E(`${F.name.slice(0,20)}...`),1)]),_:2},1032,["color","onClose"])]),_:2},1032,["title"])):(g(),A(s,{key:1,closable:!0,color:F.color,onClose:B=>e(F)},{default:o(()=>[h(E(F.name),1)]),_:2},1032,["color","onClose"]))],64))),128)),t(s,{style:{background:"#fff","border-style":"dashed",cursor:"pointer"},onClick:x},{default:o(()=>[t(c(co)),Go]),_:1}),t(j,{visible:a.modalVisible,"onUpdate:visible":y[2]||(y[2]=F=>a.modalVisible=F),centered:"","ok-text":"\u786E\u8BA4","cancel-text":"\u53D6\u6D88",title:"\u6DFB\u52A0\u65B0\u6807\u7B7E",onOk:i},{default:o(()=>[m("div",Jo,[Wo,t(C,{ref_key:"inputRef",ref:r,size:"small",value:a.inputValue,"onUpdate:value":y[0]||(y[0]=F=>a.inputValue=F)},null,8,["value"])]),m("div",Zo,[Xo,t(D,{pureColor:a.color,"onUpdate:pureColor":y[1]||(y[1]=F=>a.color=F)},null,8,["pureColor"])])]),_:1},8,["visible"])],64)}}});const te={id:"browsers",class:"h-100"},oe={class:"col-12 p-1 ps-3 pe-3"},ee={class:"breadcrumb"},re=h("\u6839\u76EE\u5F55"),ne={class:"col-12 p-1 ps-3 pe-3 operations"},ae=h("\u65B0\u5EFA\u6587\u4EF6\u5939"),ie=h("\u591A\u5F00\u6D4F\u89C8\u5668"),le=h(" \u6279\u91CF\u542F\u52A8 "),de=h(" \u6279\u91CF\u5BFC\u5165 "),me={key:1,class:"col-12 list-container p-3"},se=h(" \u5173\u95ED "),pe=h(" \u91CD\u542F "),ce=h(" \u542F\u52A8 "),ge=["value"],ue={key:0},be={class:"list text-center"},fe=P({__name:"index",setup(n){const d=mt(()=>p.browser.folders.find(w=>w.uid===p.browser.currentFolderUid)),l=mt(()=>p.browser.list.find(w=>w.uid===p.browser.currentBrowserUid)),r=mt(()=>d?p.browser.folders.filter(w=>{var v;return w.parent===((v=d.value)==null?void 0:v.uid)}):p.browser.folders.filter(w=>w.parent===void 0)),a=mt(()=>d?p.browser.list.filter(w=>{var v;return w.parent===((v=d.value)==null?void 0:v.uid)}):p.browser.list.filter(w=>w.parent===void 0)),e=tt({search:{name:"",tag:void 0}}),x=()=>H.crypto.randomUUID().replace(/-/g,"");V(d,()=>{p.browser.currentBrowserUid=""});function i(w){const v=[w];let L=u(w.parent);for(;L;)v.unshift(L),L=u(L.parent);return v}function u(w){return p.browser.folders.find(v=>v.uid===w)}function y(w){var L;const v=p.browser.folders.findIndex(M=>M.uid===w);if(v!==-1){for(const M of((L=p.browser.folders.at(v))==null?void 0:L.children)||[])y(M);p.browser.list=p.browser.list.filter(M=>M.parent!==w),p.browser.folders.splice(v,1)}}function s(w){const v=p.browser.list.findIndex(L=>L.uid===w);v!==-1&&p.browser.list.splice(v,1)}function f(){var v,L;const w=x();(v=d.value)==null||v.children.push(w),p.browser.folders.push({uid:w,name:"\u672A\u547D\u540D\u6587\u4EF6\u5939",children:[],createTime:Date.now(),parent:(L=d.value)==null?void 0:L.uid,renaming:!0})}function C(){var w;p.browser.list.push({uid:x(),name:"\u672A\u547D\u540D\u6D4F\u89C8\u5668",createTime:Date.now(),notes:"",tags:[],parent:(w=d.value)==null?void 0:w.uid,renaming:!0,histories:[{action:"\u521B\u5EFA",time:Date.now()}]})}function D(w){if(p.browser.tags.find(v=>v.name===w.name)===void 0){p.browser.tags.push(w);const v=R();v==null||v.histories.unshift({action:"\u6DFB\u52A0\u6807\u7B7E",content:w.name,time:Date.now()}),console.log(w)}}function j(w){p.browser.tags=p.browser.tags.filter(L=>L.name!==w.name);const v=R();v==null||v.histories.unshift({action:"\u5220\u9664\u6807\u7B7E",content:w.name,time:Date.now()})}function F(){}function I(){const w=R();w&&w.histories.unshift({action:"\u8FD0\u884C",time:Date.now()})}function B(){const w=R();w&&w.histories.unshift({action:"\u91CD\u542F",time:Date.now()})}function z(){const w=R();w&&w.histories.unshift({action:"\u5173\u95ED",time:Date.now()})}function Y(w){const v=R();v&&v.notes!==w.target.value&&(v.notes=w.target.value,v==null||v.histories.unshift({action:"\u5907\u6CE8",content:v.notes,time:Date.now()}))}function R(){return p.browser.list.find(w=>{var v;return w.uid===((v=l.value)==null?void 0:v.uid)})}return(w,v)=>{const L=b("a-breadcrumb-item"),M=b("a-breadcrumb"),K=b("a-button"),kt=b("a-divider"),Rt=b("a-tag"),qt=b("a-select-option"),Nt=b("a-select"),Vt=b("a-input-search"),Yt=b("a-empty"),Kt=b("a-space"),ot=b("a-descriptions-item"),Ht=b("a-timeline-item"),Gt=b("a-timeline"),Jt=b("a-descriptions"),Wt=b("a-drawer");return g(),k("div",te,[m("div",oe,[m("span",ee,[t(M,null,{default:o(()=>[t(L,{class:"path-item",onClick:v[0]||(v[0]=_=>c(p).browser.currentFolderUid="")},{default:o(()=>[re]),_:1}),(g(!0),k(T,null,O(c(d)?i(c(d)):[],_=>(g(),A(L,{key:_.uid,class:"path-item",onClick:dt=>c(p).browser.currentFolderUid=_.uid},{default:o(()=>[h(E(_.name),1)]),_:2},1032,["onClick"]))),128))]),_:1})])]),m("div",ne,[t(K,{small:"",ghost:"",type:"primary",shape:"round"},{default:o(()=>[t(q,{type:"icon-folder-fill",onClick:f},{default:o(()=>[ae]),_:1})]),_:1}),t(K,{small:"",ghost:"",type:"primary",shape:"round"},{default:o(()=>[t(q,{type:"icon-chrome-fill",onClick:C},{default:o(()=>[ie]),_:1})]),_:1}),t(K,{small:"",shape:"round"},{default:o(()=>[le]),_:1}),t(K,{small:"",shape:"round"},{default:o(()=>[de]),_:1}),t(kt,{type:"vertical"}),t(Nt,{value:e.search.tag,"onUpdate:value":v[1]||(v[1]=_=>e.search.tag=_),mode:"multiple",placeholder:"\u4F7F\u7528\u6807\u7B7E\u8FC7\u6EE4\u6D4F\u89C8\u5668",style:{"min-width":"200px"}},{default:o(()=>[(g(!0),k(T,null,O(c(p).browser.tags,_=>(g(),A(qt,{value:_.name,label:_.name},{default:o(()=>[t(Rt,{color:_.color},{default:o(()=>[h(E(_.name),1)]),_:2},1032,["color"])]),_:2},1032,["value","label"]))),256))]),_:1},8,["value"]),t(Vt,{value:e.search.name,"onUpdate:value":v[2]||(v[2]=_=>e.search.name=_),placeholder:"\u8F93\u5165\u540D\u5B57\u641C\u7D22\u6D4F\u89C8\u5668",style:{"min-width":"200px"},onSearch:F},null,8,["value"])]),t(kt,{class:"m-0"}),c(a).length===0&&c(r).length===0?(g(),A(Yt,{key:0,description:"\u6682\u65E0\u4EFB\u4F55\u6D4F\u89C8\u5668"})):(g(),k("div",me,[c(l)?(g(),A(Wt,{key:0,placement:"right",closable:!1,visible:!!c(l),width:"600","get-container":!1,style:{position:"absolute"},onClose:v[4]||(v[4]=_=>c(p).browser.currentBrowserUid="")},{default:o(()=>[t(Kt,{class:"mb-3 d-flex justify-content-end"},{default:o(()=>[t(K,{shape:"round",danger:""},{default:o(()=>[t(q,{type:"icon-close",onClick:z},{default:o(()=>[se]),_:1})]),_:1}),t(K,{shape:"round"},{default:o(()=>[t(q,{type:"icon-sync",onClick:B},{default:o(()=>[pe]),_:1})]),_:1}),t(K,{type:"primary",shape:"round"},{default:o(()=>[t(q,{type:"icon-play-circle",onClick:I},{default:o(()=>[ce]),_:1})]),_:1})]),_:1}),t(Jt,{bordered:"",size:"small"},{default:o(()=>[t(ot,{label:"\u540D\u5B57",span:3},{default:o(()=>[h(E(c(l).name),1)]),_:1}),t(ot,{label:"\u521B\u5EFA\u4E8E",span:3},{default:o(()=>[h(E(c(Lt)(c(l).createTime)),1)]),_:1}),t(ot,{label:"\u6807\u7B7E",span:3},{default:o(()=>[t(Qo,{tags:c(l).tags,"onUpdate:tags":v[3]||(v[3]=_=>c(l).tags=_),onCreate:D,onRemove:j},null,8,["tags"])]),_:1}),t(ot,{label:"\u5907\u6CE8",span:3},{default:o(()=>[m("textarea",{class:"notes",value:c(l).notes,onBlur:Y},null,40,ge)]),_:1}),t(ot,{label:"\u64CD\u4F5C\u5386\u53F2",span:3},{default:o(()=>[t(Gt,{class:"histories"},{default:o(()=>[(g(!0),k(T,null,O(c(l).histories,_=>(g(),A(Ht,null,{default:o(()=>[m("p",null,E(c(kr)(_.time)),1),m("p",null,[m("span",null,E(_.action),1),_.content?(g(),k("span",ue,": "+E(_.content),1)):X("",!0)])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1},8,["visible"])):X("",!0),m("div",be,[(g(!0),k(T,null,O(c(r),(_,dt)=>(g(),A(Et,{key:dt,name:_.name,uid:_.uid,renaming:_.renaming,"on-click":et=>c(p).browser.currentFolderUid=et,"on-rename":(et,_t)=>{_.name=_t,_.renaming=!1},"on-remove":y,icon:"icon-wenjianjia"},null,8,["name","uid","renaming","on-click","on-rename"]))),128)),(g(!0),k(T,null,O(c(a),(_,dt)=>{var et;return g(),A(Et,{key:dt,name:_.name,uid:_.uid,renaming:_.renaming,"on-click":()=>c(p).browser.currentBrowserUid=_.uid,"on-remove":s,"on-rename":(_t,zt)=>{_.histories.unshift({action:"\u6539\u540D",content:`${_.name} => ${zt}`,time:Date.now()}),_.name=zt,_.renaming=!1},icon:((et=c(l))==null?void 0:et.uid)===_.uid?"icon-chrome-fill":"icon-chrome"},null,8,["name","uid","renaming","on-click","on-rename","icon"])}),128))])]))])}}});var he=N(fe,[["__scopeId","data-v-2cc4ee36"]]);const vt=n=>(pt("data-v-4e034e61"),n=n(),ct(),n),xe={class:"col-12 p-2 m-auto"},ve={class:"d-flex mb-1 align-items-center border-bottom"},we=vt(()=>m("span",null,"\u5217\u6570:",-1)),ye=vt(()=>m("span",null," \u663E\u793A:",-1)),ke=h(" \u5168\u90E8 "),_e=h(" \u7F16\u8F91\u4E2D "),ze=h(" \u8FD0\u884C\u4E2D "),Fe=vt(()=>m("span",null," \u9875\u9762\u5E8F\u53F7:",-1)),Ee=["src"],Ce=P({__name:"index",setup(n){const d=Ft(()=>[{name:"\u5168\u90E8",data:[]},{name:"\u7F16\u8F91\u4E2D",data:[],color:"orange"},{name:"\u8FD0\u884C\u4E2D",data:[],color:"processing"}]),l=S(d.value[0].name),r=Ft(()=>d.value.find(s=>s.name===l.value)),a=S(4),e=S(1),x=S("");S("");const i=S(!1),u=S(""),y=S("");return(s,f)=>{var L;const C=b("a-tag"),D=b("a-slider"),j=b("a-divider"),F=b("a-select-option"),I=b("a-select"),B=b("Icon"),z=b("a-tooltip"),Y=b("a-input"),R=b("a-input-search"),w=b("a-empty"),v=b("a-modal");return g(),k("div",xe,[m("div",null,[(g(!0),k(T,null,O(c(d),(M,K)=>(g(),A(C,{key:K,color:M.color},{default:o(()=>[h(E(M.name)+": "+E(M.data.length),1)]),_:2},1032,["color"]))),128))]),m("div",ve,[we,t(D,{value:a.value,"onUpdate:value":f[0]||(f[0]=M=>a.value=M),style:{width:"100px",margin:"10px 6px 10px"},type:"number",min:1,max:12},null,8,["value"]),t(j,{type:"vertical"}),ye,t(I,{value:l.value,"onUpdate:value":f[1]||(f[1]=M=>l.value=M),size:"small",style:{width:"100px"}},{default:o(()=>[t(F,{key:"1",value:"\u5168\u90E8"},{default:o(()=>[ke]),_:1}),t(F,{key:"1",value:"\u7F16\u8F91\u4E2D"},{default:o(()=>[_e]),_:1}),t(F,{key:"2",value:"\u8FD0\u884C\u4E2D"},{default:o(()=>[ze]),_:1})]),_:1},8,["value"]),t(j,{type:"vertical"}),Fe,t(Y,{value:e.value,"onUpdate:value":f[2]||(f[2]=M=>e.value=M),size:"small",type:"number",style:{width:"100px"},min:1},{suffix:o(()=>[t(z,{title:"\u663E\u793A\u6D4F\u89C8\u5668\u6BCF\u4E2A\u9875\u9762\u56FE\u50CF\u7684\u5E8F\u53F7\uFF0C\u9ED8\u8BA4\u4E3A1\uFF0C\u8868\u793A\u663E\u793A\u7B2C\u4E00\u4E2A\u9875\u9762"},{default:o(()=>[t(B,{type:"icon-info-circle"})]),_:1})]),_:1},8,["value"]),t(j,{type:"vertical"}),t(R,{value:x.value,"onUpdate:value":f[3]||(f[3]=M=>x.value=M),placeholder:"\u8F93\u5165\u6587\u4EF6\u540D\u641C\u7D22",size:"small",style:{width:"150px"}},null,8,["value"])]),((L=c(r))==null?void 0:L.data.length)===0?(g(),A(w,{key:0,class:"pt-5",description:"\u6682\u65F6\u6CA1\u6709\u7F16\u8F91\u4E2D/\u8FD0\u884C\u4E2D\u7684\u6587\u4EF6"})):(g(),k("div",{key:1,class:"dashboard pt-1",style:eo({"grid-template-columns":`repeat(${a.value}, 1fr)`})},null,4)),t(v,{visible:i.value,"onUpdate:visible":f[4]||(f[4]=M=>i.value=M),width:"90%",style:{top:"10px"},title:u.value,footer:null},{default:o(()=>[m("div",null,[m("img",{style:{width:"100%"},src:y.value},null,8,Ee)])]),_:1},8,["visible","title"])])}}});var Be=N(Ce,[["__scopeId","data-v-4e034e61"]]);const De=["onMouseover"],$e={class:"col-12"},Ae={class:"user-script-name"},je=["href"],Se=["title"],Ie=["href"],Me=["src"],Ue={class:"ms-1"},Le={class:"user-script-infos"},Te=h(" \u2B07\uFE0F"),Pe=h(" \u{1F4E6}"),Oe=h(" v"),Re=h(" \u2B50"),qe={class:"user-script-actions"},Ne=P({__name:"ScriptList",props:{scripts:null},setup(n){const d=n,{scripts:l}=at(d),r=S(0);function a(e){const x=Date.now(),i=x-e;let u="";const s=60*1e3,f=60*s,C=24*f,D=[31,28,31,30,31,30,31,31,30,31,30,31],j=new Date(x).getFullYear(),F=new Date(x).getMonth();(j%4===0&&j%100!==0||j%400===0)&&(D[1]=29);const I=Math.abs(new Date(e).getMonth()-F),B=j-new Date(e).getFullYear();if(B!==0&&I>=12)u=B+"\u5E74";else{if(I!==0&&Math.floor(i/C)>=D[F])return I+"\u4E2A\u6708";z(C)!==0?u=z(C)+"\u5929":z(f)!==0?u=z(f)+"\u5C0F\u65F6":z(s)!==0?u=z(s)+"\u5206\u949F":u="\u521A\u521A"}function z(Y){return Math.floor(i/Y)}return u}return(e,x)=>{const i=b("a-tag");return g(!0),k(T,null,O(c(l),(u,y)=>(g(),k("div",{key:y,class:ht(["user-script d-flex",{"user-script-active":u.id===r.value}]),onMouseleave:x[0]||(x[0]=s=>r.value=0),onMouseover:s=>r.value=u.id},[m("div",$e,[m("div",Ae,[m("a",{target:"_blank",href:u.info.url},[m("span",null,E(u.info.name),1)],8,je)]),m("div",{class:"user-script-descriptions",title:u.info.description},[(g(!0),k(T,null,O(u.info.authors,(s,f)=>(g(),k("a",{key:f,href:s.url,class:"user-script-author",target:"_blank"},[s.avatar?(g(),k("img",{key:0,src:s.avatar,class:"user-script-icon"},null,8,Me)):(g(),A(q,{key:1,type:"icon-user",style:{"margin-top":"4px"},class:"user-script-icon"})),m("span",Ue,E(s.name),1)],8,Ie))),128)),h(" \uFF1A "+E(u.info.description),1)],8,Se),m("div",Le,[t(i,{color:"blue",title:"\u4ECA\u65E5\u5B89\u88C5"},{default:o(()=>[Te,m("b",null,E(u.info.daily_installs),1)]),_:2},1024),t(i,{color:"green",title:"\u603B\u5B89\u88C5"},{default:o(()=>[Pe,m("b",null,E(u.info.total_installs),1)]),_:2},1024),t(i,{color:"red",title:"\u7248\u672C"},{default:o(()=>[Oe,m("b",null,E(u.info.version),1)]),_:2},1024),t(i,{color:"orange",title:"\u8BC4\u5206"},{default:o(()=>[Re,m("b",null,E(u.info.ratings?u.info.ratings.toFixed(1):"\u65E0"),1)]),_:2},1024),t(i,{title:"\u521B\u5EFA\u65F6\u95F4"},{default:o(()=>[h(E(new Date(u.info.createTime).toLocaleDateString())+" \u521B\u5EFA ",1)]),_:2},1024),t(i,{title:"\u66F4\u65B0\u65F6\u95F4"},{default:o(()=>[h(E(a(u.info.updateTime))+" \u524D\u66F4\u65B0 ",1)]),_:2},1024)])]),m("div",qe,[it(e.$slots,"actions",{script:u,alreadyInstalled:c(p).scripts.find(s=>s.id===u.id)!==void 0},void 0,!0)])],42,De))),128)}}});var Ct=N(Ne,[["__scopeId","data-v-7f699c1c"]]);const Ve=n=>(pt("data-v-60f05b08"),n=n(),ct(),n),Ye={class:"col-12 ps-1 pe-1 m-auto"},Ke={key:0},He={key:1,class:"p-2"},Ge=Ve(()=>m("p",{class:"text-secondary markdown"},[h(" \u6587\u4EF6\u4E2D\u9009\u62E9 "),m("code",null,"\u81EA\u52A8\u52A0\u8F7D\u811A\u672C"),h(" \uFF0C\u542F\u52A8\u540E\u4F1A\u81EA\u52A8 "),m("code",null,"\u5B89\u88C5/\u66F4\u65B0"),h(" \u4EE5\u4E0B\u811A\u672C\u5230\u6D4F\u89C8\u5668\u3002 ")],-1)),Je={class:"user-script-page"},We={class:"col-12 actions d-flex"},Ze={class:"col-12"},Xe={key:0},Qe={key:1},tr={key:2},or={key:3,class:"user-script-list"},er={class:"pb-1"},rr=h(" \u6570\u636E\u6765\u6E90 : "),nr=["href"],ar=P({__name:"index",setup(n){const d=S(W.scriptSearchEngines.map(u=>({engine:u,list:[]}))),l=S("1"),r=S(W.scriptSearchEngines[0].name),a=S("");function e(u){d.value.forEach(async y=>{y.loading=!0,y.error=!1;try{const s=await y.engine.search(u,1,10);console.log("commonScripts",s),y.list=s.map(f=>({id:f.id,url:f.code_url,runAtAll:!0,runAtFiles:[],info:f}))}catch(s){console.log(s),y.error=!0}y.loading=!1})}function x(u){p.scripts.push(u)}function i(u){p.scripts.splice(p.scripts.indexOf(u),1)}return(u,y)=>{const s=b("a-empty"),f=b("Icon"),C=b("a-button"),D=b("a-tooltip"),j=b("a-tab-pane"),F=b("a-input-search"),I=b("a-skeleton"),B=b("a-tabs");return g(),k("div",Ye,[t(B,{activeKey:l.value,"onUpdate:activeKey":y[2]||(y[2]=z=>l.value=z),class:"h-100"},{default:o(()=>[t(j,{key:"1",tab:"\u672C\u5730\u811A\u672C"},{default:o(()=>[c(p).scripts.length===0?(g(),k("div",Ke,[t(s,{description:"\u6682\u65E0\u6570\u636E, \u641C\u7D22\u559C\u6B22\u7684\u811A\u672C\u8FDB\u884C\u6DFB\u52A0\u54E6~"})])):(g(),k("div",He,[Ge,t(Ct,{scripts:c(p).scripts},{actions:o(({script:z})=>[t(D,{title:"\u79FB\u9664\u811A\u672C"},{default:o(()=>[t(C,{size:"small",danger:"",type:"primary",class:"user-script-action",onClick:Y=>i(z)},{default:o(()=>[t(f,{type:"icon-delete"})]),_:2},1032,["onClick"])]),_:2},1024),t(D,{title:z.runAtAll?"\u5173\u95ED\u811A\u672C":"\u5F00\u542F\u811A\u672C"},{default:o(()=>[t(C,{size:"small",type:z.runAtAll?"primary":"default",class:"user-script-action",onClick:Y=>z.runAtAll=!z.runAtAll},{default:o(()=>[t(f,{type:z.runAtAll?"icon-timeout":"icon-play-circle"},null,8,["type"])]),_:2},1032,["type","onClick"])]),_:2},1032,["title"])]),_:1},8,["scripts"])]))]),_:1}),t(j,{key:"2",tab:"\u811A\u672C\u641C\u7D22"},{default:o(()=>[m("div",Je,[m("div",We,[t(F,{value:a.value,"onUpdate:value":y[0]||(y[0]=z=>a.value=z),placeholder:"\u8F93\u5165\u811A\u672C\u540D\u8FDB\u884C\u641C\u7D22","enter-button":"",onSearch:e},null,8,["value"])]),m("div",Ze,[t(B,{activeKey:r.value,"onUpdate:activeKey":y[1]||(y[1]=z=>r.value=z)},{default:o(()=>[(g(!0),k(T,null,O(d.value,z=>(g(),A(j,{key:z.engine.name,tab:z.engine.name},{default:o(()=>[z.loading?(g(),k("div",Xe,[t(I,{active:""})])):z.error?(g(),k("div",Qe,[t(s,{description:"\u8BF7\u6C42\u51FA\u9519\uFF0C\u8BF7\u91CD\u65B0\u5C1D\u8BD5"})])):z.list.length===0?(g(),k("div",tr,[t(s,{description:"\u6682\u65E0\u6570\u636E"})])):(g(),k("div",or,[m("div",er,[rr,m("a",{href:z.engine.homepage,target:"_blank"},E(z.engine.homepage),9,nr)]),t(Ct,{scripts:z.list},{actions:o(({script:Y,alreadyInstalled:R})=>[t(C,{size:"small",class:"user-script-action",disabled:R,type:R?"default":"primary",onClick:w=>x(Y)},{default:o(()=>[t(f,{type:"icon-plus"}),h(" "+E(R?"\u5DF2\u6DFB\u52A0":"\u6DFB\u52A0"),1)]),_:2},1032,["disabled","type","onClick"])]),_:2},1032,["scripts"])]))]),_:2},1032,["tab"]))),128))]),_:1},8,["activeKey"])])])]),_:1})]),_:1},8,["activeKey"])])}}});var ir=N(ar,[["__scopeId","data-v-60f05b08"]]);const lr={class:"col-12 ps-1 pe-1 m-auto"},dr={class:"text-secondary text-small markdown"},mr=m("code",null,"\u6D4F\u89C8\u5668\u62D3\u5C55",-1),sr=h(" \u4F1A\u5728\u6D4F\u89C8\u5668\u542F\u52A8\u65F6\u81EA\u52A8\u52A0\u8F7D\uFF08\u4F60\u4E5F\u53EF\u4EE5\u624B\u52A8\u4E0B\u8F7D\u5E76\u89E3\u538B\u5230 "),pr=m("code",null,"\u5B58\u50A8\u8DEF\u5F84",-1),cr=h(" \u4E2D\uFF09\u3002"),gr=m("br",null,null,-1),ur=m("code",null,"\u5F53\u524D\u5B58\u50A8\u8DEF\u5F84",-1),br=m("br",null,null,-1),fr=m("code",null,"\u7528\u6237\u811A\u672C\u7BA1\u7406\u5668",-1),hr=h(" \u53EA\u80FD\u5B58\u5728\u4E00\u4E2A\uFF0C\u5426\u5219\u53EF\u80FD\u9020\u6210\u811A\u672C\u4E4B\u95F4\u7684\u51B2\u7A81 "),xr={key:0},vr=P({__name:"index",setup(n){const{ipcRenderer:d}=require("electron"),l=S(!0),r=S([]);lt(async()=>{for(const i of W.extensionSearchEngines){const u=await i.search();r.value=r.value.concat(u)}for(const i of r.value)i.installed=H.fs.existsSync(`${p.extensionsPath}/${i.name}`);l.value=!1});async function a(i){if(r.value.filter(u=>u.installed).length>0)st.warn("\u811A\u672C\u7BA1\u7406\u5668\u5DF2\u7ECF\u5B58\u5728\uFF0C\u8BF7\u5378\u8F7D\u53E6\u5916\u4E00\u4E2A\u518D\u5C1D\u8BD5\u5B89\u88C5\u3002");else{const u=H.path.join(p.extensionsPath,`${i.name}.zip`),y=H.path.join(p.extensionsPath,i.name),s=(f,C,D,j,F)=>{x(i.name,C,D,j,F)};d.on("download",s);try{await $.methods.call("download","download-extensions-"+i.name,i.url,u),await $.methods.call("unzip",u,y),H.fs.unlinkSync(u)}catch(f){st.error("\u4E0B\u8F7D\u9519\u8BEF "+f.message)}d.removeListener("download",s),i.installed=!0}}function e(i){H.fs.rmdirSync(H.path.join(p.extensionsPath,i.name),{recursive:!0}),i.installed=!1}function x(i,u,y,s,f){u==="download-extensions-"+i&&(y===100?G("\u62D3\u5C55\u4E0B\u8F7D",`${i} \u4E0B\u8F7D\u5B8C\u6210: ${(f/1024/1024).toFixed(2)}MB`,"download-extensions-"+i,{type:"success",duration:3}):G("\u62D3\u5C55\u4E0B\u8F7D",`${i} \u4E0B\u8F7D\u4E2D: ${(s/1024/1024).toFixed(2)}MB/${(f/1024/1024).toFixed(2)}MB`,"download-extensions-"+i,{type:"info",duration:5,close:!1}))}return(i,u)=>{const y=b("a-skeleton"),s=b("a-table");return g(),k("div",lr,[m("p",dr,[mr,sr,pr,cr,gr,ur,h(" "+E(c(p).extensionsPath)+" ",1),br,fr,hr]),l.value?(g(),k("div",xr,[t(y,{active:""})])):(g(),A(s,{key:1,size:"small","data-source":r.value.map(f=>({key:f.name,...f})),columns:[{title:"\u56FE\u6807",width:64,dataIndex:"icon",key:"icon",customRender:({text:f})=>U("img",{src:f,style:{width:"32px"}})},{title:"\u540D\u79F0",dataIndex:"name",key:"name"},{title:"\u7B80\u4ECB",dataIndex:"description",ellipsis:!0,key:"description"},{title:"\u5B98\u7F51",dataIndex:"homepage",key:"homepage",customRender:({text:f})=>U("a",{href:f},f)},{title:"\u64CD\u4F5C",width:64,fixed:"right",dataIndex:"actions",key:"actions",customRender:({index:f})=>U("span",[r.value[f].installed?U(c(nt),{type:"link",danger:!0,size:"small",onClick:()=>e(r.value[f])},["\u5378\u8F7D"]):U(c(nt),{type:"link",size:"small",onClick:()=>a(r.value[f])},["\u5B89\u88C5"])])}]},null,8,["data-source","columns"]))])}}}),W=tt({routes:[{name:"browsers",path:"/",component:rt(he),meta:{icon:"icon-chrome",filledIcon:"icon-chrome-fill",title:"\u6D4F\u89C8\u5668\u5217\u8868"}},{name:"dashboard",path:"/dashboard",component:rt(Be),meta:{icon:"icon-dashboard",filledIcon:"icon-dashboard-fill",title:"\u4EEA\u8868\u76D8"}},{name:"user-scripts",path:"/user-scripts",component:rt(ir),meta:{icon:"icon-bug",filledIcon:"icon-bug-fill",title:"\u7528\u6237\u811A\u672C"}},{name:"extensions",path:"/extensions",component:rt(vr),meta:{icon:"icon-pintu",filledIcon:"icon-pintu1",title:"\u6D4F\u89C8\u5668\u62D3\u5C55",tutorial:{step:3,placement:"rightTop",tooltip:"4. \u6D4F\u89C8\u5668\u62D3\u5C55\u4F1A\u5BF9\u7528\u6237\u811A\u672C\u8FDB\u884C\u7BA1\u7406\u4EE5\u53CA\u89E3\u6790\u548C\u8FD0\u884C\u3002"}}},{name:"setting",path:"/setting",component:rt(qo),meta:{icon:"icon-setting",filledIcon:"icon-setting-fill",title:"\u8BBE\u7F6E"}}],themes:[{key:"theme-light",name:"\u767D\u663C"},{key:"theme-night",name:"\u9ED1\u591C"}],extensionSearchEngines:[{name:"OCS\u5B98\u65B9\u62D3\u5C55",homepage:"https://cdn.ocsjs.com",async search(){return(await _r()).extensions}}],scriptSearchEngines:[{name:"GreasyFork",homepage:"https://greasyfork.org",search:async(n,d,l)=>{let a=await $.methods.call("get","https://greasyfork.org/zh-CN/scripts.json?"+new URLSearchParams({q:n,page:d<=0?"1":d.toString()}));return a=a.sort((e,x)=>x.daily_installs-e.daily_installs),a.map(e=>{const x=e.good_ratings/(e.good_ratings+e.bad_ratings)*10;return{url:e.url,name:e.name,description:e.description,homepage:e.url,id:e.id,createTime:new Date(e.created_at).getTime(),updateTime:new Date(e.code_updated_at).getTime(),daily_installs:e.daily_installs,total_installs:e.total_installs,authors:e.users,ratings:x?parseFloat(x.toFixed(1)):0,code_url:e.code_url,license:e.license,version:e.version}})}},{name:"ScriptCat - \u811A\u672C\u732B",homepage:"https://scriptcat.org",search:async(n,d,l)=>{let a=(await $.methods.call("get","https://scriptcat.org/api/v1/scripts?"+new URLSearchParams({count:l.toString(),page:d<=0?"1":d.toString(),keyword:n}))).list;return a=a.sort((e,x)=>x.today_install-e.today_install),a.map(e=>({id:e.script.script_id,version:e.script.version,authors:[{url:`https://scriptcat.org/users/${e.user_id}`,name:e.username,avatar:e.avatar?`https://scriptcat.org${e.avatar}`:void 0}],name:e.name,description:e.description,url:`https://scriptcat.org/script-show-page/${e.script.script_id}`,code_url:`https://scriptcat.org/scripts/code/${e.script.script_id}/${e.name}.user.js`,ratings:e.score?e.score*2/10:0,createTime:e.createtime*1e3,updateTime:e.updatetime*1e3,daily_installs:e.today_install,total_installs:e.total_install}))}}]}),wr=require("electron-store"),jt=new wr,p=tt(so(jt.store,{scripts:[],notifies:[],browser:{currentFolderUid:"",currentBrowserUid:"",list:[],folders:[],tags:[]},setting:{launchOptions:{executablePath:""},theme:W.themes[0],window:{zoom:1,alwaysOnTop:!1,autoLaunch:!1}}}));tt([]);tt(new Map);V(()=>po(p.setting.theme),(n,d)=>{document.body.classList.remove(d.key),document.body.classList.add(n.key)});V(p,n=>{jt.store=JSON.parse(JSON.stringify(n))},{deep:!0});V(()=>p.setting.window.autoLaunch,St);V(()=>p.setting.window.zoom,It);V(()=>p.setting.window.alwaysOnTop,Mt);function yr(){document.body.classList.add(p.setting.theme.key)}function St(){$.methods.call("autoLaunch")}function It(){$.webContents.call("setZoomFactor",p.setting.window.zoom)}function Mt(){$.win.call("setAlwaysOnTop",p.setting.window.alwaysOnTop)}const{OCSApi:Ut}=require("@ocsjs/common");function Lt(n){return At(n).format("YYYY-MM-DD")}function kr(n){return At(n).format("YYYY-MM-DD hh:mm")}async function Tt(n){try{const d=await Ut.getInfos();let l=d.notify;const r=p.notifies;n||(l=l.filter(a=>r.findIndex(e=>(a==null?void 0:a.id)===(e==null?void 0:e.id))===-1)),console.log("notify",{infos:d,exits:r,remoteNotify:l}),l.length&&Dt.info({title:()=>"\u{1F389}\u6700\u65B0\u516C\u544A\u{1F389}",okText:n?"\u786E\u5B9A":"\u6715\u5DF2\u9605\u8BFB",cancelText:n?"\u53D6\u6D88":"\u4E0B\u6B21\u4E00\u5B9A",okCancel:!0,style:{top:"20px"},content:()=>U("div",{style:{maxHeight:"320px",overflow:"auto"}},l.map(a=>U("div",[U("div",{style:{marginBottom:"6px",fontWeight:"bold"}},(a==null?void 0:a.id)||"\u65E0\u6807\u9898"),U("ul",a.content.map(e=>U("li",e)))]))),onOk(){n||(p.notifies=[...p.notifies].concat(l))},onCancel(){}})}catch(d){st.error("\u6700\u65B0\u901A\u77E5\u83B7\u53D6\u5931\u8D25\uFF1A"+d)}}async function _r(){return await Ut.getInfos()}const ft=P({__name:"TitleLink",props:{url:null,title:null},setup(n){const{shell:d}=require("electron");function l(r){d.openExternal(r)}return(r,a)=>{const e=b("a-menu-item");return g(),A(e,{onClick:a[0]||(a[0]=x=>l(n.url))},{default:o(()=>[h(E(n.title),1)]),_:1})}}});const wt=n=>(pt("data-v-76fba282"),n=n(),ct(),n),zr={class:"title border-bottom"},Fr={class:"w-100 title-items"},Er=wt(()=>m("li",null,"\u5DE5\u5177",-1)),Cr=h(" \u6279\u91CF\u542F\u52A8\u6D4F\u89C8\u5668 "),Br=wt(()=>m("li",null,"\u7A97\u53E3",-1)),Dr=h(" \u5F00\u53D1\u8005\u5DE5\u5177 "),$r=h(" \u6253\u5F00\u65E5\u5FD7\u76EE\u5F55 "),Ar=h(" \u91CD\u65B0\u52A0\u8F7D "),jr=h(" \u91CD\u65B0\u542F\u52A8 "),Sr=h(" \u6700\u5927\u5316 "),Ir=h(" \u6700\u5C0F\u5316 "),Mr=h(" \u8FD8\u539F "),Ur=h(" \u5173\u95ED "),Lr=wt(()=>m("li",null,"\u5E2E\u52A9",-1)),Tr=h(" \u5173\u4E8E "),Pr=h(" \u5168\u90E8\u901A\u77E5 "),Or=["title"],Rr=P({__name:"Title",setup(n){const{shell:d}=require("electron"),l=S(!1);lt(()=>{Q(()=>i())}),V(l,()=>{l.value?$.win.call("maximize"):$.win.call("restore")});function r(){$.app.call("relaunch"),$.app.call("quit")}async function a(){d.openPath(H.path.join(await $.app.call("getPath","logs"),Lt(Date.now())))}function e(){Tt(!0)}async function x(){Dt.info({title:"\u5173\u4E8E",closable:!0,maskClosable:!0,content:U("ul",[U("li","\u8F6F\u4EF6\u7248\u672C : "+await $.app.call("getVersion")),U("li",[U("span","\u7248\u672C\u8BE6\u60C5 : "),U("a",{href:"#",onClick:()=>d.openExternal("https://docs.ocsjs.com/docs/\u8D44\u6E90\u4E0B\u8F7D/app-downloads")},"https://docs.ocsjs.com/docs/\u8D44\u6E90\u4E0B\u8F7D/app-downloads")])])})}async function i(){l.value=await $.win.call("isMaximized")}function u(){}return(y,s)=>{const f=b("a-menu-item"),C=b("a-menu"),D=b("a-dropdown"),j=b("a-menu-divider"),F=b("Icon");return g(),k("div",zr,[m("ul",Fr,[t(D,null,{overlay:o(()=>[t(C,{class:"title-menu"},{default:o(()=>[t(f,{onClick:u},{default:o(()=>[Cr]),_:1})]),_:1})]),default:o(()=>[Er]),_:1}),t(D,null,{overlay:o(()=>[t(C,{class:"title-menu"},{default:o(()=>[t(f,{onClick:s[0]||(s[0]=I=>c($).webContents.call("openDevTools"))},{default:o(()=>[Dr]),_:1}),t(f,{onClick:a},{default:o(()=>[$r]),_:1}),t(j),t(f,{onClick:s[1]||(s[1]=I=>c($).webContents.call("reload"))},{default:o(()=>[Ar]),_:1}),t(f,{onClick:r},{default:o(()=>[jr]),_:1}),t(j),t(f,{onClick:s[2]||(s[2]=I=>c($).win.call("maximize"))},{default:o(()=>[Sr]),_:1}),t(f,{onClick:s[3]||(s[3]=I=>c($).win.call("minimize"))},{default:o(()=>[Ir]),_:1}),t(f,{onClick:s[4]||(s[4]=I=>c($).win.call("restore"))},{default:o(()=>[Mr]),_:1}),t(f,{onClick:s[5]||(s[5]=I=>c($).win.call("close"))},{default:o(()=>[Ur]),_:1})]),_:1})]),default:o(()=>[Br]),_:1}),t(D,null,{overlay:o(()=>[t(C,null,{default:o(()=>[t(f,{onClick:x},{default:o(()=>[Tr]),_:1}),t(ft,{title:"\u5B98\u7F51\u6559\u7A0B",url:"https://docs.ocsjs.com/"}),t(f,{onClick:e},{default:o(()=>[Pr]),_:1}),t(ft,{title:"\u7248\u672C\u66F4\u65B0",url:"https://docs.ocsjs.com/docs/\u8D44\u6E90\u4E0B\u8F7D/app-downloads"}),t(ft,{title:"\u811A\u672C\u66F4\u65B0\u65E5\u5FD7",url:"https://github.com/ocsjs/ocsjs/blob/3.0/CHANGELOG.md"})]),_:1})]),default:o(()=>[Lr]),_:1})]),m("ul",{class:"traffic-light",onMouseenter:s[9]||(s[9]=I=>i())},[m("li",{title:"\u6700\u5C0F\u5316",onClick:s[6]||(s[6]=I=>c($).win.call("minimize"))},[t(F,{type:"icon-minus"})]),m("li",{title:l.value?"\u8FD8\u539F":"\u6700\u5927\u5316",onClick:s[7]||(s[7]=I=>l.value=!l.value)},[t(F,{type:l.value?"icon-Batchfolding":"icon-border"},null,8,["type"])],8,Or),m("li",{title:"\u5173\u95ED",onClick:s[8]||(s[8]=I=>c($).win.call("close"))},[t(F,{type:"icon-close"})])],32)])}}});var qr=N(Rr,[["__scopeId","data-v-76fba282"]]);const Nr={};function Vr(n,d){const l=b("router-view");return g(),A(l,null,{default:o(({Component:r})=>[(g(),A(ro,null,[(g(),A($t(r)))],1024))]),_:1})}var Yr=N(Nr,[["render",Vr],["__scopeId","data-v-4d20cb08"]]);const Pt=W.routes,yt=io({history:lo(),routes:Pt});yt.beforeEach(()=>!0);const Kr={class:"row h-100 w-100 p-0 m-0"},Hr={class:"col-auto border-end sider h-100"},Gr={class:"sider-items"},Jr=["onClick"],Wr={class:"text-secondary version"},Zr={class:"col p-0 m-0"},Xr={class:"row main h-100 w-100 p-0 m-0"},Qr={class:"col-12 p-0 m-0"},tn={class:"col-12 p-0 m-0 overflow-auto"},on=P({__name:"App",setup(n){const{ipcRenderer:d}=require("electron"),l=mo().currentRoute;return lt(()=>{Q(()=>{Tt(!1),d.on("download",(r,a,e,x,i)=>{a==="update"&&G("OCS\u66F4\u65B0\u7A0B\u5E8F",`\u66F4\u65B0\u4E2D: ${(i/1024/1024).toFixed(2)}MB/${(x/1024/1024).toFixed(2)}MB`,"updater",{type:"info",duration:5,close:!1})}),$.logger.call("info","render store init"),It(),St(),Mt(),yr()})}),no(()=>{d.removeAllListeners("download")}),(r,a)=>{const e=b("a-config-provider");return g(),A(e,{locale:c(Xt)},{default:o(()=>[m("div",Kr,[m("div",Hr,[m("div",Gr,[(g(!0),k(T,null,O(c(Pt),(x,i)=>(g(),k("div",{key:i,class:"sider-item",onClick:u=>c(yt).push(x.path)},[t(q,{class:"icon",type:x.path===c(l).path&&x.meta.filledIcon?x.meta.filledIcon:x.meta.icon},null,8,["type"])],8,Jr))),128))]),m("div",Wr,E(c(p).version),1)]),m("div",Zr,[m("div",Xr,[m("div",Qr,[t(qr,{id:"title"})]),m("div",tn,[t(Yr)])])])])]),_:1},8,["locale"])}}});console.log(Date.now());process.on("uncaughtException",n=>{$.logger.call("error","\u672A\u77E5\u7684\u9519\u8BEF",n),G("\u672A\u77E5\u7684\u9519\u8BEF",n.stack,"render-error",{type:"error",copy:!0})});process.on("unhandledRejection",n=>{$.logger.call("error","\u672A\u77E5\u7684\u9519\u8BEF",n),G("\u672A\u77E5\u7684\u9519\u8BEF",n.stack,"render-error",{type:"error",copy:!0})});const en=go({scriptUrl:"js/iconfont.js"}),Ot=ao(on);Ot.use(yt).use(Qt).use(uo).component("IconFont",en).component("Icon",q).mount("#app");Ot.directive("focus",{mounted(n){n.focus()}});console.log(Date.now());
